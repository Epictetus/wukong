http://cluster-fork.info/index.php?title=Main_Page


h3. For Big Data, instead of "ACID" you use "ACID*"

* A -- Associative
* C -- Commutative
* I -- Idempotent
* D -- Distributed
* (*) -- (and where possible, left in sort order)


Finally, where possible leave things in sort order by some appropriate index. Clearly I'm not talking about introducing extra unnecessary sorts on ephemeral data.  For things that will be read (and experimented with) much more often than they're written, though, it's worth running a final sort.  Now you can

* Efficiently index into a massive dataset with binary search
* Do a direct merge sort on two files with the same sort order
* Run a reducer directly across the data
* Assign a synthetic key by just serially numbering lines (either distribute a unique prefix to each mapper 

Note: for files that will live on the DFS, you should usually *not* do a total sort, 

h3. Encode once, and carefully.

Encoding violates idempotence.

Is there a lightweight, mostly-transparent, ASCII-compatible *AND* idempotent encoding scheme lurking in a back closet of some algorithms book?



h3. Keys

Natural keys are right for big data

Synthetic keys suck. They demand locality or a central keymaster.

See About Keys

* Use the natural key
* Hash the natural key. This has some drawbacks

OK, fine. you need a synthetic key

* Do a total sort, and use nl
* Generate
* Use a single reducer to reduce locality. YUCK.
* have each mapper generate a unique prefix; number each line as "prefix#{line_number}" or whatever.

How do you get a unique prefix?

* Distribute a unique prefix to each mapper out-of-band. People using Streaming are out of luck.

* Use a UUID -- that's what they're for. Drawback: ridiculously long

* Hash the machine name, PID and timestamp to something short. Check after the
  fact that uniqueness was achieved. Use the birthday party formula to find out
  how often this will happen. (In practice, almost never.)

h3. Epistemology and exeption handling

something that goes wrong 1/1000 time will happen


h3. Real hackers use the command line as an IDE


